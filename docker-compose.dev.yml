services:
  mark-board-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    image: mark-board:dev
    ports:
      - '5173:5173'  # Vite dev server
      - '2222:22'    # SSH (key-based auth only)
    environment:
      - VITE_BASE=/
    volumes:
      - .:/app
      - mark-board-dev-data:/app/kanban-data
      - mark-board-dev-ssh:/root/.ssh
      - /app/node_modules  # Prevent host node_modules from shadowing container's
      # Uncomment the line below to mount your SSH public key (replace with your actual path)
      # - ~/.ssh/id_ed25519.pub:/root/.ssh/authorized_keys:ro

volumes:
  mark-board-dev-data:
    driver: local
  mark-board-dev-ssh:
    driver: local
